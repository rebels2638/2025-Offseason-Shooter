---
description: When the user asks to "run simulation", "test code", "verify changes", or explicitly mentions the simulation/testing protocol
alwaysApply: false
---
# FRC Simulation & Testing Agent Protocol

1.  **Reference Documentation:** Always consult `agent/README.md` for the detailed workflow and tool usage.
2.  **Environment:** Ensure the Python environment is active or use the python executable in `venv/bin/python3`.
3.  **Standard Workflow:**
    *   **Configure:** Update `src/main/java/frc/robot/constants/Constants.java` to set `currentMode = Mode.SIM` and `agentMode = true`.
    *   **Define Test:** Modify `autonomousInit()` in `src/main/java/frc/robot/Robot.java` to execute the command under test.
    *   **Execute:** Run the simulation using `python3 agent/tools/sim_wrapper.py`.
    *   **Analyze:** Verify results using `agent/tools/log_tool.py` and `agent/tools/list_keys.py` on the generated `.wpilog` file.

**Key Constraint:** Always use the provided python tools in `agent/tools/` for running simulations and analyzing logs, rather than raw gradle commands, to ensure proper log management.